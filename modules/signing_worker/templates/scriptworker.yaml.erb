provisioner_id: scriptworker-prov-v1
worker_group: signing-mac-v1
worker_type: tb-signing-mac-v1
worker_id: '<%= @hostname %>'

credentials:
    clientId: "<%= @role_config['taskcluster_client_id'] %>"
    accessToken: "<%= @role_config['taskcluster_access_token'] %>"

artifact_upload_timeout: 1200
task_max_timeout: 7200
task_script: ["<%= @virtualenv_dir %>/bin/iscript", "<%= @script_config_file %>"]
verbose: true

sign_chain_of_trust: true
verify_chain_of_trust: true
verify_cot_signature: true
cot_job_type: signing
cot_product: "<%= @role_config['cot_product'] %>"
# Calls to Github API are limited to 60 an hour. Using an API token allows to raise the limit to
# 5000 per hour. https://developer.github.com/v3/#rate-limiting
github_oauth_token: "<%= @github_oauth_token %>"

log_dir: "<%= scope['signing_worker::scriptworker_base'] %>/logs"
work_dir: "<%= scope['signing_worker::scriptworker_base'] %>/work"
artifact_dir: "<%= scope['signing_worker::scriptworker_base'] %>/artifacts"
task_log_dir: "<%= scope['signing_worker::scriptworker_base'] %>/artifacts/public/logs"
watch_log_file: true

scriptworker_provisioners:
    - scriptworker-prov-v1

ed25519_private_key_path: "<%= scope['signing_worker::scriptworker_base'] %>/certs/ed25519_privkey"
